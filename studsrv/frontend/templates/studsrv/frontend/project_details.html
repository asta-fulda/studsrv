{% extends "studsrv/frontend/base.html" %}

{% block content %}


{% if view.project.blocked != None %}
<div class="alert alert-danger">
  <i class="fa fa-ban fa-5x pull-left"></i>
  <h4>Diese Projekt wurde gesperrt</h4>
  <p>
      {{view.project.blocked}}
  </p>
  <p>
      Bitte wende dich an <a href="mailto:edv@asta.hs-fulda.org">die
      Administratoren</a> wenn du das Problem behoben hast oder du Hilfe bei der
      Behebung des Problems brauchst.
  </p>
</div>
{% endif %}

<h2>Projekt <em>{{view.project.name}}</em></h2>

<div class="row">
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <i class="fa fa-info"></i>
                    Details
	                  <span class="pull-right">
			                  <a class="btn btn-xs btn-primary">
			                      <i class="fa fa-pencil"></i>
			                      Bearbeiten
			                  </a>
			                  <a class="btn btn-xs btn-danger">
                            <i class="fa fa-trash-o"></i>
                            L&ouml;schen
                        </a>
			              </span>
		            </h3>
            </div>
            <div class="panel-body">
								<dl class="dl-horizontal">
										<dt>Name</dt>
										<dd>{{view.project.name}}</dd>
					
										<dt>Erstellt</dt>
										<dd>{{view.project.created}}</dd>
					
										<dt>Adresse</dt>
										<dd><a href="{{view.project.url}}"
										       target="_blank">
										    {{view.project.url}}
										</a></dd>
					
										<dt>Typ</dt>
										<dd>{{view.project.image.title}}</dd>
					
										<dt>Sichtbarkeit</dt>
										<dd>{{view.project.visibility}}</dd>
								</dl>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
								<h3 class="panel-title">
					          <i class="fa fa-tachometer"></i>
										Status
										<span class="pull-right">
												{% if view.project.running %}
												    <form action="{% url 'studsrv.frontend.project.stop' name %}"
                                  method="post">
                                {% csrf_token %}
																<button type="submit"
																        class="btn btn-xs btn-danger">
																		<i class="fa fa-power-off"></i>
																		Anhalten
																</button>
														</form>
												{% else %}
													  <form action="{% url 'studsrv.frontend.project.start' name %}"
													        method="post">
	                              {% csrf_token %}
														    <button type="submit"
														            class="btn btn-xs btn-success {% if view.project.blocked != None %}disabled{% endif %}">
																		<i class="fa fa-power-off"></i>
																		Starten
																</button>
														</form>
												{% endif %}
										</span>
								</h3>
            </div>
						<div class="panel-body">
				        <dl class="dl-horizontal">
										<dt>Status</dt>
										{% if view.project.blocked != None %}
										    <dd>Gesperrt</dd>
										{% else %}
										    <dd>{{view.project.running|yesno:'Gestartet,Angehalten'}}</dd>
                    {% endif %}
                    
										{% if view.project.running %}
											<dt>Laufzeit</dt>
											<dd>{{view.project.started}} <small>{{project.uptime}}</small></dd>
										{% endif %}
					
										<dt>Speicherplatz</dt>
										<dd>{{view.project.disk_usage}}</dd>
								</dl>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <i class="fa fa-users"></i>
                    Administratoren
                    <span class="pull-right">
                        <a class="btn btn-xs btn-success">
                            <i class="fa fa-plus"></i>
                            Hinzuf&uuml;gen
                        </a>
                        <a class="btn btn-xs btn-danger">
                            <i class="fa fa-minus"></i>
                            Entfernen
                        </a>
                    </span>
                </h3>
            </div>
            <table class="table table-condensed">
                <thead>
                    <tr>
                        <th>FD-Nummer</th>
                        <th>Name</th>
                        <th>E-Mail</th>
                    </tr>
                </thead>
                <tbody>
                    {% for admin in project.admins %}
                        <tr>
                            <td>{{admin.id}}</td>
                            <td>{{admin.name}}</td>
                            <td>{{admin.email}}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>


<pre>{{view.project|pprint}}</pre>
{% endblock %}
